 

<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" type="text/css" href="/css/main.css">
  <link rel="stylesheet" type="text/css" href="/css/art.css">
  <link rel="icon" type="images/png" href="/images/favicon.png">
  <script src="/js/element.js"></script>
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.4.0/build/styles/atom-one-light.min.css">
  <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.4.0/build/highlight.min.js"></script>
</head>

<body>
  <script>
    window.onload = function() {
      loadMath();
      drawSaying();
      hljs.configure({ tabReplace: '  ' });
      hljs.initHighlighting()
    }
  </script>

  <div class="content">
    <div class="sidebar" id="sidebar">
      <title>
          Codeforces 做题记录
      </title>
      <script>
    SaveBackground()
  </script>
  <div class="sidebar-title">
    <p style="font-weight: bold; font-size: 25px; font-family: 'ZCOOL XiaoWei';" onclick="drawSaying()"> 
  
  DPairの非自制 blog
      <HR align="center" style="width: 200px;">
    </p>
      <div font="" style="text-align: center; font-size: 18px; font-family: 'ZCOOL XiaoWei';" class="sayingtype" id="sayingtype"> </div>
      <div font="" style="text-align: center; font-size: 6px;"> 　 </div>
    <div class="saying" id="saying"> </div>
  </div>
  <div class="sidebar-body">
  
    <div class="sidebar-content">
      <ul class = "sidebar-menu">
        <a href="/">
          <li class="list-item sidebar-menu-item" id="sidebar-content-home">
            Home
          </li>
        </a>
        <a href="/articles">
          <li class="list-item sidebar-menu-item" id="sidebar-content-articles">
            Articles
          </li>
        </a>
        <a href="/transit">
            <li class="list-item sidebar-menu-item" id="sidebar-content-Transit"
            style="background: #e5e5e5">
            Transit
        </li>
        </a>
        <a href="/tags">
          <li class="list-item sidebar-menu-item" id="sidebar-content-tags">
            Tags
          </li>
        </a>
      </ul>
    </div>
    <div class="sidebar-about">
      <div style="text-align: center; font-size: 16px;"> About DPair </div>
      <HR align="center">
      <div style="margin: 2 auto; width: min-content" onclick="NextBackground()">
        <img class="avatar" alt="DPair" src="/images/avatar.png">
      </div>
      <ul class="sidebar-links">
  
  <li class="sidebar-links-item">
      <a href="https://www.luogu.com.cn/blog/DPair2005/" class="friend-link"> 
        luogu blog 
      </a>
    </li>
<li class="sidebar-links-item">
      <a href="https://codeforces.com/profile/DPair" class="friend-link"> 
        Codeforces 
      </a>
    </li>
<li class="sidebar-links-item">
      <a href="https://atcoder.jp/users/DPair" class="friend-link"> 
        AtCoder 
      </a>
    </li>
<li class="sidebar-links-item">
      <a href="https://gitee.com/DPair" class="friend-link"> 
        gitee 
      </a>
    </li>
<li class="sidebar-links-item">
      <a href="https://github.com/DPair2005" class="friend-link"> 
        github 
      </a>
    </li>
<li class="sidebar-links-item">
      <a href="mailto:DPair2005@163.com" class="friend-link"> 
        mail 
      </a>
    </li>
  
      </ul>
    </div>
  
    <ul class="sidebar-links">
      <div style="text-align: center; font-size: 16px;"> Friend Links </div>
      <HR align="center">
      
  <li class="sidebar-links-item">
      <a href="https://www.luogu.com.cn/user/140572" class="friend-link"> 
        DSair
      </a>
    </li>
<li class="sidebar-links-item">
      <a href="https://coderoj.gitee.io/" class="friend-link"> 
        Jacderzhang's blog
      </a>
    </li>
<li class="sidebar-links-item">
      <a href="https://xyix.gitee.io/" class="friend-link"> 
        xYix's blog
      </a>
    </li>
<li class="sidebar-links-item">
      <a href="https://www.cnblogs.com/Flying2018/" class="friend-link"> 
        Flying2018's blog
      </a>
    </li>
<li class="sidebar-links-item">
      <a href="https://www.cnblogs.com/-Wallace-/" class="friend-link"> 
        _Wallace_'s blog
      </a>
    </li>
<li class="sidebar-links-item">
      <a href="https://www.cnblogs.com/Point-King/" class="friend-link"> 
        Point_King's blog
      </a>
    </li>
  
    </ul>
  
  </div>
  
    </div>

    <div class="post" id="post">
      <h1 id="codeforces-%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95">Codeforces 做题记录</h1>
<p>感觉 CF 上的题也得写一点题解什么的，写题解总是好的。</p>
<p>这里就彻底乱序了（（ 大家要找某道题题解时建议 <code>ctrl + F</code> （（（</p>
<h4 id="-cf1313d-happy-new-year-https-www-luogu-com-cn-problem-cf1313d"><a href="https://www.luogu.com.cn/problem/CF1313D">CF1313D Happy New Year</a></h4>
<p>你有一个长度为 $m$ 的全 $0$ 的序列，给定 $n$ 个区间，你可以选择其中任意个区间进行区间翻转（即全部异或 $1$ ）的机会，让你使得全局和（即 $1$ 的个数）最大。</p>
<p>保证每一个位置被给出的 $n$ 个区间覆盖的次数不超过 $k$ 次。</p>
<p>$1 \le n \le 10^5, 1 \le m \le 10^9, 1 \le k \le 8$ 。</p>
<hr>
<details>
<summary><strong> 具体解法 </strong></summary>
<p></p>
<p>看到这个 $k$ 的奇怪数据范围直接考虑指数级。</p>
<p>由于 $m$ 比较大，我们考虑把每一个区间翻转拆成 $(l, id), (r + 1, -id)$ 两个二元组，然后对所有二元组排序。这部分可能有一些细节，我不多赘述了，留给读者自行思考。</p>
<p>设 $dp[i][S]$ 表示选到第 $i$ 个二元组且这个点上被选了的集合为 $S$ 的最大权值。</p>
<p>考虑其转移，当这个点的二元组是某一个修改的开始点时，考虑当前新加入的修改是否选由自己决定，其他的与上一个位置必须一一对应。</p>
<p>删除一个修改同理，故转移是 $O(|S|)=O(2^k)$ 的。</p>
<p>最终复杂度 $O(n2^k)$ ，可以通过本题。</p>
</details>

<hr>
<h4 id="-cf891c-envy-https-www-luogu-com-cn-problem-cf891c"><a href="https://www.luogu.com.cn/problem/CF891C">CF891C Envy</a></h4>
<p>给你一幅有边权的连通无向图，　$q$ 次询问，每次问你一个边集中的所有边是否可能同时出现于某棵最小生成树中。</p>
<p>所有数　$\le 5\times 10^5$ 。</p>
<hr>
<details>
<summary><strong> 具体解法 </strong></summary>
<p></p>
<p>首先最小生成树有两个性质：</p>
<p>其一就是对于一幅图，其最小生成树中某种边权的边的数量是固定的。</p>
<p>其二就是加入所有小于等于某一权值的所有边后形成的连通块是固定的。</p>
<p>这启示我们分权值考虑。</p>
<p>这个东西可以用 LCT 或者可持久化并查集什么的处理，但是还有更好的做法。</p>
<p>我们考虑先克鲁斯卡尔一遍，然后对于每一种权值，我们先存下来这种权值中每一条边当前所连接的两个连通块的编号，然后再把这些边加入边集。</p>
<p>那么询问时每一组权值用并查集判一下是否出现环即可，若出现则无解，反之有解。</p>
<p>最终复杂度 $O(n\log n)$ （假装它同阶），可以通过本题。</p>
</details>

<hr>
<h4 id="-cf886e-maximum-element-https-www-luogu-com-cn-problem-cf886e"><a href="https://www.luogu.com.cn/problem/CF886E">CF886E Maximum Element</a></h4>
<p>有一个求序列最大值的 <strong>假算法</strong> 的逻辑为当一个数大于其后面的 $k$ 个数，就返回这个值。问你有多少个 $1 - n$ 的排列满足序列会返回错误的答案。</p>
<p><del>感觉我概括的不是很好建议去看原题面。</del></p>
<p>$n, k \le 10^6$</p>
<hr>
<details>
<summary><strong> 具体解法 </strong></summary>
<p></p>
<p>注意到返回值错误不仅需要中途退出，返回值还不能是 $n$ 。</p>
<p>我们考虑 dp，设 $f_i$ 表示 $1-i$ 的排列没有<strong> 中途退出 </strong>的排列数。</p>
<p>考虑枚举新加入的 $i$ 的位置，这个值的位置显然只能出现在 $[i-k+1, i]$ 之中。</p>
<p>化一下之后发现是一个前缀和优化的形式，这部分复杂度 $O(n)$ ，其中涉及到预处理逆元也可以做到 $O(n)$ 。</p>
<p>然后就是求退出 $n$ 的方案数，考虑枚举 $n$ 的位置，并且 $n$ 前面没有中途退出的就行了，这个简单枚举即可。</p>
<p>最终复杂度 $O(n)$</p>
</details>

<hr>
<h4 id="-cf460d-little-victor-and-set-https-www-luogu-com-cn-problem-cf460d"><a href="https://www.luogu.com.cn/problem/CF460D">CF460D Little Victor and Set</a></h4>
<p>给你 $l, r, k$ ，让你在 $[l, r]$ 中选至多 $k$ 个互不相同的数使得这些数异或和最小，不能不选。</p>
<p>$1\le l \le r \le 10^{12}, 1 \le k \le 10^6$ 。 </p>
<hr>
<details>
<summary><strong> 具体解法 </strong></summary>
<p></p>
<p>首先不难发现对于任意的 $n=2k$ ，$n, n+1, n+2, n+3$ 的异或和一定是 $0$ ，$n, n + 1$ 的异或和一定是 $1$ 。</p>
<p>于是我们首先考虑枚举小范围的答案（即 $[l, r]$ 长度较小），那么剩下的情况区间都比较大，可以套用刚才的结论。</p>
<p>那么 $k \ge 4$ 的情况答案为 $0$ ，$k=2$ 时简单分类讨论即可， $k=1$ 时答案显然为 $l$ 。</p>
<p>最后考虑 $k=3$ ，不难发现此时 $1$ 的答案必定存在，考虑是否可能出现 $0$ 。</p>
<p>我们设答案的三元组升序排序后为 $(a, b, c)$ ，我们考虑枚举 $c$ ，那么就是要使得 $b$ 与 $c$ 的异或值 $a$ 尽可能大，同时 $c$ 尽可能小，然后均出现在 $[l, r]$ 之中。</p>
<p>不难发现最优的情况一定是 $c=2^{x} + 2^{y}$ 的形式，然后 $b=c-1$ 。</p>
<p>那么枚举即可。</p>
</details>

<hr>
<h4 id="-cf1117g-recursive-queries-https-www-luogu-com-cn-problem-cf1117g"><a href="https://www.luogu.com.cn/problem/CF1117G">CF1117G Recursive Queries</a></h4>
<p>给你一个排列， $q$ 次强制离线的询问，每一次询问一段区间 $[l, r]$ 形成的笛卡尔树上每一棵子树大小的和。</p>
<p>数据范围 $10^6$ 级别。</p>
<hr>
<details>
<summary><strong> 具体解法 </strong></summary>
<p></p>
<p>我们先用一个单调栈处理出每一个点向左和向右第一个比它大的位置，分别记作 $L_i, R_i$ 。</p>
<p>那么每一次询问要求的就是 $\sum\_{i=l}^r \min(R_i, r) - \max(L_i, l)$ ，不难发现前后两部分无关，可以拆开来做。</p>
<p>那么离线下来扫一遍即可，每一次两个树状数组实现单点修改区间查询即可。</p>
<p>最终复杂度 $O(n \log n)$ 。</p>
</details>

<hr>
<h4 id="-cf526g-cf526g-spiders-evil-plan-https-www-luogu-com-cn-problem-cf526g"><a href="https://www.luogu.com.cn/problem/CF526G">CF526G CF526G Spiders Evil Plan</a></h4>
<p>给你一棵有边权的树， $q$ 次询问，每次给定一个二元组 $(x, y)$ ，问你在树上选出 $y$ 条路径，要求这 $y$ 条路径组成的连通块中的边权和最大且 $x$ 属于这个连通块，输出这个最大值，强制在线。</p>
<p>所有数 $\in [1, 10^5]$ 并保证不爆 <code>int</code> 。</p>
<hr>
<details>
<summary><strong> 具体解法 </strong></summary>
<p></p>
<p>首先我们注意到 $k$ 条路径一定可以覆盖一棵有 $2k$ 个叶子节点的树，证明略，可以感性理解或当做结论背下来。</p>
<p>然后我们不难发现答案一定带一个直径的端点，故以两个直径的端点为根分别处理问题，然后每次询问取一个 $\max$ 即可，由于这个点一定是一个叶子，问题就转化为了选 $2k-1$ 个叶子然后使得这些叶子到根的路径的并集所组成的连通块中边权和最大，并且要包含 $x$ 。</p>
<p>我们考虑对这棵树进行有边权的长链剖分，不难发现我们选择的一定是最长的前 $2k-1$ 条链，而这些链是不交的。</p>
<p>但是这样不一定包含 $x$ ，那么我们此时有两种选择，一种是把 $x$ 直接并到连通块当中然后删掉当前连通块中最短的链，另一种是直接把 $x$ 往上倍增后跳到的链一直到叶子都删掉，然后改接 $x$ ，显然最优解一定出现在这两种情况之一中。</p>
<p>那么直接分讨一下然后按上面所说的处理即可，复杂度为倍增和排序的 $O(n\log n)$ 。</p>
</details>

<hr>
<h4 id="-cf1062f-upgrading-cities-https-www-luogu-com-cn-problem-cf1062f"><a href="https://www.luogu.com.cn/problem/CF1062F">CF1062F Upgrading Cities</a></h4>
<p>给你一幅 DAG ，问你有多少个点 $x$ 满足至多有一个点 $y$ 满足 $y$ 不能被 $x$ 到达且 $x$ 不能被 $y$ 到达。</p>
<p>$|V|, |E| \le 3\times 10^5$</p>
<hr>
<details>
<summary><strong> 具体解法 </strong></summary>
<p></p>
<p>不难发现，我们要求的应该是每一个点能到达的点数。</p>
<p>考虑建正反图然后拓扑排序。</p>
<p>不难发现，若一个时刻队列中点数 $\ge 3$ ，那么这些点显然互不到达，故全部无解不需要考虑，我们只需要讨论队列中点数 $< 3$ 的情况。</p>
<p>首先若队列中只有一个点，显然剩下所有没被访问到的点都要经过这个点。</p>
<p>然后若队列中有 $2$ 个点，考虑另一个点是否可以到达一个度为 $1$ 的点，若可以，则说明当前点除了另一个点以外还有不能到达的点，故直接无解，否则统计贡献。</p>
<p>然后根据一个点能到达和能被到达的点数判断是否成立即可，一种实现技巧是不合法的情况不统计贡献，那么显然这些不合法的点一定在贡献上亦不合法。</p>
<p>复杂度 $O(n)$ 。</p>
</details>

<hr>
<h4 id="-cf1311e-construct-the-binary-tree-https-www-luogu-com-cn-problem-cf1311e"><a href="https://www.luogu.com.cn/problem/CF1311E">CF1311E Construct the Binary Tree</a></h4>
<p>让你构造一棵 $n$ 个节点深度和为 $d$ 的二叉树，并判断有没有解。</p>
<hr>
<details>
<summary><strong> 具体解法 </strong></summary>
<p></p>
<p>首先有无解很好判，显然最小值为完全二叉树的情况，这个堆式建树即可。</p>
<p>判完之后考虑从最后一个点开始换父亲，考虑记录最后一个没有儿子的节点，若能连（即深度符合条件）则连到这个节点上。</p>
<p>显然每一层要至少留一个节点，考虑留 $2^k$ 的节点。</p>
<p>那么此时所有节点必然满足最多只有一个儿子。</p>
<p>考虑最后一个节点换父亲时深度不满足题意了，由于其祖先深度连续且最多只有一个儿子，故暴力往上跳直到深度符合条件为止。</p>
<p>正确性显然，复杂度 $O(n)$ 。</p>
</details>

<hr>

      

    </div>

  </div>
</body>