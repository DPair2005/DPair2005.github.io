<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="/css/main.css">
    <link rel="stylesheet" type="text/css" href="/css/art.css">
    <link rel="icon" type="images/png" href="/images/favicon.png">
    <script src="/js/header.js"></script>
<script src="/js/search.js"></script>
<script src="/js/theme.js"></script>
<script src="/js/hitokoto.js"></script>

    <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.2.0/build/styles/atom-one-light.min.css">
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.2.0/build/highlight.min.js"></script>
    <script src="/js/language.min.js"></script>
    <title>
        析合树学习笔记 - DPairの非自制 blog
    </title>
</head>

<body>
        <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="/js/load_theme.js"></script>

    <script>
        window.onload = function() {
            loadMath();
            drawSaying();
            hljs.configure({ tabReplace: '    ' });
            hljs.highlightAll()
        }
    </script>

    <div class="content">
        <div class="sidebar" id="sidebar">
            <script>
    document.heartland = false;
    window.localStorage.setItem('heartland', false);
</script>

<div class="sidebar-title">
    <p style="font-weight: bold; font-size: 25px; font-family: 'ZCOOL XiaoWei';" onclick="drawSaying()"> 
    DPairの非自制 blog
    </p>
    <hr align="center" style="width: 200px;">
    <p></p>
    <div font style="text-align: center; font-size: 18px; font-family: 'ZCOOL XiaoWei';" class="sayingtype" id="sayingtype"> </div>
    <div font="" style="text-align: center; font-size: 6px;"> 　 </div>
    <div class="saying" id="saying"> </div>
</div>


<div class="sidebar-body">

    <div class="sidebar-content">
        <ul class="sidebar-menu">
            <a href="/">
                <li class="list-item sidebar-menu-item" id="sidebar-content-home">
                    Home
                </li>
            </a>
            <a href="/articles">
                <li class="list-item sidebar-menu-item" id="sidebar-content-articles" style="background: #e5e5e5">
                    Articles
                </li>
            </a>
            <a href="/tags">
                <li class="list-item sidebar-menu-item" id="sidebar-content-tags">
                    Tags
                </li>
            </a>
        </ul>
    </div>

    <div class="sidebar-about">
    <div style="text-align: center; font-size: 16px;">
        <a href="/aboutme" style="text-decoration: none; color: currentColor;">
            About me
        </a>
    </div>
    <HR align="center">
    <div class="avatar-rotate" style="margin: 2 auto; width: min-content">
        <img class="avatar" alt="DPair" src="/images/avatar.png", onclick="NextBackground()"></img>
    </div>

    <ul class="sidebar-links">
    <li class="sidebar-links-item">
        <a href="https://dpair2005.github.io" class="friend-link">
            github blog 
        </a>
    </li>
<li class="sidebar-links-item">
        <a href="https://dpair.gitee.io" class="friend-link">
            gitee blog 
        </a>
    </li>
<li class="sidebar-links-item">
        <a href="https://www.luogu.com.cn/blog/DPair2005/" class="friend-link">
            luogu blog 
        </a>
    </li>
<li class="sidebar-links-item">
        <a href="https://codeforces.com/profile/DPair" class="friend-link">
            Codeforces 
        </a>
    </li>
<li class="sidebar-links-item">
        <a href="https://atcoder.jp/users/DPair" class="friend-link">
            AtCoder 
        </a>
    </li>
<li class="sidebar-links-item">
        <a href="https://github.com/DPair2005" class="friend-link">
            github 
        </a>
    </li>
<li class="sidebar-links-item">
        <a href="https://gitee.com/DPair" class="friend-link">
            gitee 
        </a>
    </li>
    </ul>

</div>

<ul class="sidebar-links">
    <div style="text-align: center; font-size: 16px;"> links </div>
    <HR align="center">

    <li class="sidebar-links-item">
        <a href="https://coderoj.gitee.io/" class="friend-link">
            Jacder's blog
        </a>
    </li>
<li class="sidebar-links-item">
        <a href="https://xyix.github.io/" class="friend-link">
            xYix's blog
        </a>
    </li>
<li class="sidebar-links-item">
        <a href="https://www.cnblogs.com/flying2018" class="friend-link">
            flying2018's blog
        </a>
    </li>
<li class="sidebar-links-item">
        <a href="https://www.cnblogs.com/Point-King/" class="friend-link">
            Point_King's blog
        </a>
    </li>
<li class="sidebar-links-item">
        <a href="https://cnblogs.com/pealfrog" class="friend-link">
            xtw's blog
        </a>
    </li>
<li class="sidebar-links-item">
        <a href="http://xyf007.ml/" class="friend-link">
            xyf007's blog
        </a>
    </li>
<li class="sidebar-links-item">
        <a href="https://www.cnblogs.com/zkdxl" class="friend-link">
            zkdxl's blog
        </a>
    </li>
<li class="sidebar-links-item">
        <a href="https://www.cnblogs.com/guts" class="friend-link">
            krimson's blog
        </a>
    </li>
<li class="sidebar-links-item">
        <a href="https://blog.moonpie.cf/" class="friend-link">
            moonpie's blog
        </a>
    </li>
<li class="sidebar-links-item">
        <a href="https://www.luogu.com.cn/blog/wh2005blog/" class="friend-link">
            wuhao2005's blog
        </a>
    </li>
<li class="sidebar-links-item">
        <a href="https://blog.jasonfan.ml/" class="friend-link">
            jasonfan's blog
        </a>
    </li>

</ul>



</div>
        </div>

        <div class="post" id="post">
            <h1>析合树学习笔记</h1>
            <p>做题做到了，发现大纲里没有，怕某些阴间人当线段树出出来，随便学学。</p>
<p>可能不是很严谨，姑且看看吧。</p>
<p><del>感觉在复读 <a href="https://oi-wiki.org/ds/divide-combine/">oi-wiki</a> 和 <a href="https://taodaling.github.io/blog/2020/08/11/%E6%9E%90%E5%90%88%E6%A0%91/">这个神仙的博客</a></del></p>
<h2 id="1-%E4%B8%80%E4%BA%9B%E5%AE%9A%E4%B9%89">1 一些定义</h2>
<h3 id="1-1-%E8%BF%9E%E7%BB%AD%E6%AE%B5">1.1 连续段</h3>
<p>对于一个排列 $P$，我们定义它上面的一个区间 $(P, [l, r])$ 为一个 <strong>“连续段”</strong>，当且仅当它满足 $P_l \sim P_r$ 在值域上是连续的。</p>
<p>或者说对 $P_l \sim P_r$ 中的元素排序后，$\max - \min = r - l$。</p>
<p>我们发现，对于两个连续段 $A, B$，其 <strong>交、并、差</strong> 都是连续段，证明略，可以自行感性理解一下。</p>
<h3 id="1-2-%E6%9C%AC%E5%8E%9F%E6%AE%B5">1.2 本原段</h3>
<p>我们按照上面连续段的定义，不难发现一个排列的连续段数量可以达到 $\mathcal{O}(n^2)$ 级别，难以形成一个优秀的数据结构。</p>
<p>因此我们考虑选取一些具有代表性的连续段，于是我们引入了 <strong>“本原段”</strong> 的概念。</p>
<p>我们一个连续段是一个 <strong>“本原段”</strong>（或者叫本原连续段），当且仅当不存在另外一个连续段与其 <strong>部分相交</strong>。</p>
<p>根据其定义，我们不难发现两个本原段只可能是 <strong>相离或包含</strong> 的关系。</p>
<h2 id="2-%E6%9E%90%E5%90%88%E6%A0%91">2 析合树</h2>
<h3 id="2-1-%E6%9E%90%E5%90%88%E6%A0%91%E7%BB%93%E6%9E%84">2.1 析合树结构</h3>
<p>我们考虑把所有本原段建成一个和线段树类似的树形结构，称为 <strong>“析合树”</strong>，每一个本原段对应结点的所有儿子结点的集合就是构成它的所有 <strong>极大本原段</strong> 对应结点的集合。</p>
<p>因此不难发现，一个非叶子结点至少有两个儿子，因此结点个数的上界是 $2n-1$。</p>
<p>考虑每一个本原段对应一个值域上的区间，我们定义一个结点的 <strong>值域区间</strong> 为它对应的这个区间。</p>
<p>然后对于一个非叶子结点，我们把它所有的儿子按原序列上的顺序加到一个序列中，称之为这个结点的 <strong>“儿子序列”</strong>。</p>
<p>再把 “儿子序列” 按 “值域区间左端点从小到大” 离散化，得到一个排列，我们称它为这个结点的 <strong>儿子排列”</strong>。</p>
<p>然后我们终于可以引入 “析合” 的概念了，我们把所有点分为两类：</p>
<ul>
<li>合点：这个结点的儿子排列单调（递增或递减），特殊的，一个叶子结点也是一个合点。</li>
<li>析点：若一个点不是合点就是析点。</li>
</ul>
<p>下面这幅 oi-wiki 上的图片应该可以很直观地阐释一个析合树的结构：
<img src="https://oi-wiki.org/ds/images/div-com1.png" alt=""></p>
<h2 id="2-2-%E4%B8%80%E4%BA%9B%E6%80%A7%E8%B4%A8">2.2 一些性质</h2>
<p>析点和合点这么命名显然是有性质的：</p>
<ul>
<li>合点：儿子序列中的每一个严格子区间都是一个连续段。</li>
<li>析点：儿子序列中的每一个长度大于 $1$ 的严格子区间都不是一个连续段。</li>
</ul>
<p>合点的性质很显然，析点这个就有点难以理解了。</p>
<p>我们可以考虑这个结点儿子序列中的每一个长度大于 $1$ 的严格子区间，若其中存在一个连续段，那么必有另一个与其相交的严格子区间也是一个连续段，否则它会成为一个本原连续段而违反了定义。</p>
<p>而这样归纳证明下去，会导致这个结点儿子序列中每一个长度大于 $1$ 的严格子区间都形成一个连续段，这会使它成为一个合点。</p>
<p>因此儿子序列中的每一个长度大于 $1$ 的严格子区间都不是一个连续段。</p>

            

        </div>

    </div>
</body>