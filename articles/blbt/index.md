---
title: 全局平衡二叉树瞎写
tags:
  - ds
  - tricks
  - wys
  - trees
---

其实就是 LCT + 重剖

考虑我们 LCT 的时候干的是什么（好吧其实我并不是很会 LCT）

我们是不是拿 Splay 出来维护链了

然后全局平衡二叉树处理的问题不需要什么 Link-Cut ，换言之树的形态不变

那么用 Splay 就很浪费了，我们直接上 BST 

先对原树重剖，这条链（没说哪个点）照旧连向链顶原树上的父亲，显然在原树上这是轻边

然后就是 BST 怎么建树的问题了

我们考虑以轻儿子 size 之和为权值建树，然后带权重心拿出来连向链顶的父亲

不难发现这样暴力跳一次最多走 $\log$ 条轻边，每在重边上跳一次轻儿子大小至少减半，因此也是 $O(\log)$ （先毛估估他是对的，我还没严格想过）

于是最终复杂度 $O(\log n)$

